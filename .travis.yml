dist: xenial
language: python
python: 3.7
before_install:
- sudo apt-get update -qq
- sudo apt-get install -qq libxml2-utils
install:
- pip install -r requirements.txt
before_script:
- wget "https://raw.githubusercontent.com/IATI/IATI-Codelists/version-2.03/codelist.xsd"
- wget "https://raw.githubusercontent.com/IATI/IATI-Codelists/version-2.03/xml.xsd"
script: xmllint --schema codelist.xsd --noout xml/*
after_script:
- |
  test $TRAVIS_BRANCH = "master" && \
  curl -s -X POST \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "Travis-API-Version: 3" \
    -H "Authorization: token $TRAVIS_TOKEN" \
    -d "{\"request\": {\"branch\":\"master\"}}" \
    https://api.travis-ci.com/repo/codeforIATI%2Fcodelists/requests
env:
  global:
    secure: DGVFr/LlewoyMEgmmMiHscF0YXc/r/0xZA3uPVscxax+rL92+Msi+hb+zlaFFWE6TFxPxXOu+z1h8RDBlLT5Rdh6dIW4Ol2hu5vd6LQu15UoFlcZY4xBaE/zYlah1b3ueVw4Ok0YoHpD8TRFwfHAgR2n/dQFoHY9wyWK2x8icRAR6KlVVz470aJdwzzwwjEEI9Ox0Xm2naP8chfgVRs0cLddsDotzyArSirJhWvvLLMDNvUE1ukq34bIZtixg420QGh2vLflCmgU40+Ump/uRFNeN/CSERLI1XOuw1S0+xqCdwE/0aaRQNWOodd8ZkuQjCvcPvjE9ad+XIC5QwoOM6I0EuLnfcFNIZs9cbiP1MJChOQhebulqRtGUdlDC7evg6fpRNEkeA8kS/d++JXGmsvN+mskZZP5BheUwidM7uvSkWKt8DLFq72PIJoN4FO/ur36wtTaQOhCMAX9brKSAWUEHfL2H03trfFQigOsetIN0wxoWpQRaTqbjWP8LQag2s1sKb6QDtcs8J0UyJshKMziorvCi4xjNUnR6ivvn+fLyF2N3TMYKRjs9l2M5b64zg+gODajir2GagiwzBcv/o/qJkH3jkZUbGPlq+eQPRjryBi8rxyN/xhyXYIkZ8EHZdgYp9m9fSQgKT8CjEiM5lTfTK+lNbbfytBpBYbjdPU=
